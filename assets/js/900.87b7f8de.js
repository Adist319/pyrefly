"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[900],{60900:(e,n,t)=>{t.r(n),t.d(n,{DEFAULT_PYTHON_PROGRAM:()=>j,default:()=>N,initializePyreflyWasm:()=>k});var r=t(96540),o=(t(32855),t(74848));function s(e){let{id:n,onClick:t,defaultLabel:s,successLabel:a,disabled:i=!1,ariaLabel:l}=e;const[x,u]=(0,r.useState)(!1);return(0,o.jsx)("button",{id:n,...{0:{className:"x78zum5 x6s0dn4 x1khhgft x1ypdohk x169l3ba xfo81ep xpivpjv x1vqgdyp xyog2rh x1aq8l9j x1v03e3n x1789zll x1com5t6 x1jdwrgt xtfardp x1heor9g x1vnbo0c x16gcxq3 x1fh9xkg xqtax1z"},2:{className:"x78zum5 x6s0dn4 x1khhgft x1ypdohk x169l3ba xfo81ep xpivpjv x1vqgdyp xyog2rh x1aq8l9j x1v03e3n x1789zll x1com5t6 x1cet8bl x1awj2ng x1yurq8p x1vnbo0c x1rpuqfj x4afe7t x1debuo4 xkpkb2g x187oe4h x1fh9xkg xqtax1z"},1:{className:"x78zum5 x6s0dn4 x1khhgft x169l3ba xfo81ep xpivpjv x1vqgdyp xyog2rh x1aq8l9j x1v03e3n x1789zll x1com5t6 x1jdwrgt xtfardp x1heor9g x1vnbo0c x16gcxq3 x1fh9xkg xqtax1z xbyyjgo x1h6gzvc x1t7rm6y xkhlokr"},3:{className:"x78zum5 x6s0dn4 x1khhgft x169l3ba xfo81ep xpivpjv x1vqgdyp xyog2rh x1aq8l9j x1v03e3n x1789zll x1com5t6 x1cet8bl x1awj2ng x1yurq8p x1vnbo0c x1rpuqfj x4afe7t x1debuo4 xkpkb2g x187oe4h x1fh9xkg xqtax1z xbyyjgo x1h6gzvc x1t7rm6y xkhlokr"}}[!!x<<1|!!i],onClick:()=>async function(){if(!i)try{await t(),u(!0),setTimeout((()=>u(!1)),2e3)}catch(e){console.error("Error in button action:",e)}}(),"aria-label":l||n,disabled:i,children:(0,o.jsx)("span",{className:"xmtou6a",children:x?a:s})})}var a=t(97187);function i(e){let{model:n,onActiveTabChange:t,isRunning:i,setIsRunning:l,pythonOutput:x,setPythonOutput:u}=e;const[c,d]=(0,r.useState)(null);(0,r.useEffect)((()=>{!async function(){try{const e=await(0,a.p)({indexURL:`${window.location.origin}/pyodide`}),n=e=>{u((n=>n+"\n"+e))};e.setStdout({batched:n}),e.setStderr({batched:n}),d(e)}catch(e){console.error("Error loading Pyodide:",e)}}()}),[]);const h=(0,r.useCallback)((async()=>{if(c&&n){t("output"),l(!0),u("");try{const e=n.getValue();c.runPython(e)}catch(e){console.error("Error running Python code:",e),u((n=>n+"\n"+e))}finally{l(!1)}}}),[c,n,t]);return(0,o.jsx)(s,{id:"run-python-button",onClick:h,defaultLabel:"\u25b6\ufe0f Run",successLabel:"\u23f3 Running...",disabled:i||!c,ariaLabel:"run Python code button"})}var l=t(68553),x=t(32992);function u(e){let{error:n,goToDef:t}=e;const{startLineNumber:r,startColumn:s,endLineNumber:a,endColumn:i}=n;let l;l=r===a?s===i?`${r}:${s}`:`${r}:${s}-${i}`:`${r}:${s}-${a}:${i}`;const x=`${l}: ${n.message} [${n.kind}]`;return(0,o.jsxs)("span",{className:"x1ypdohk",onClick:()=>t(r,s,a,i),children:[(0,o.jsx)("span",{className:"x1x2k2ee",children:"ERROR "}),x]})}function c(e){let{loading:n,goToDef:t,errors:r,internalError:s,pythonOutput:a="",isRunning:i=!1,activeTab:l="errors",setActiveTab:x=()=>{}}=e;const c=l,d=null!=r&&r.length>0;return(0,o.jsxs)("div",{id:"tryPyrefly-results-container",className:"xh2ww80 x1n2onr6 xfifm61 x1dt6g3d x134d0co",children:[(0,o.jsx)("div",{className:"x78zum5 xo6guvx x15su7se xif65rj",children:(0,o.jsxs)("ul",{className:"x78zum5 xe8uvvx x1ghz6dp x1717udv x67bb7w",children:[(0,o.jsx)("li",{...{0:{className:"x1oxdvv4 x1ypdohk x117nqv4 x7pa710"},1:{className:"x1oxdvv4 x1ypdohk x117nqv4 x7pa710 x1r7xphn x1x4k32v x1jyxor1"}}[!("errors"!==c)|0],onClick:()=>x("errors"),children:"Errors"}),(0,o.jsx)("li",{...{0:{className:"x1oxdvv4 x1ypdohk x117nqv4 x7pa710"},1:{className:"x1oxdvv4 x1ypdohk x117nqv4 x7pa710 x1r7xphn x1x4k32v x1jyxor1"}}[!("output"!==c)|0],onClick:()=>x("output"),children:"Output"})]})}),(0,o.jsxs)("div",{className:"xysyzu8 x1io82uz",children:[n&&(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"x78zum5 xl56j7k x1anpbxc",children:[(0,o.jsx)("div",{className:"x6jxa94 x1v9usgg xehhe6p xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf xkf7kw9"}),(0,o.jsx)("div",{className:"x6jxa94 x1v9usgg xehhe6p xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf xlzs402"}),(0,o.jsx)("div",{className:"x6jxa94 x1v9usgg xehhe6p xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf"})]})}),!n&&"errors"===c&&(0,o.jsx)("pre",{className:"x2lkgqm xat24cr x78zum5",children:(0,o.jsx)("ul",{className:"xe8uvvx x1ghz6dp x1717udv",children:d?r.map(((e,n)=>(0,o.jsx)("li",{...{0:{},1:{className:"x1anpbxc x889kno xhbnqo4"}}[!!(n>0)|0],children:(0,o.jsx)(u,{error:e,goToDef:t},n)},n))):(0,o.jsx)("li",{children:s?`Pyrefly encountered an internal error: ${s}.`:null==r?"Pyrefly failed to fetch errors.":0===r?.length?"No errors!":null})})}),"output"===c&&(0,o.jsx)("pre",{className:"x2lkgqm xat24cr x78zum5",children:i?(0,o.jsx)("div",{children:"Running..."}):(0,o.jsx)("div",{children:a||"No output"})})]})]})}var d=t(84138);const h=(e,n)=>{throw"not implemented"},p=new Map;const g=(e,n)=>null,m=new Map;const f=(e,n)=>null,y=new Map;const v=()=>[],b=new Map;d.languages.register({id:"python",extensions:[".py"],aliases:["Python"]}),d.languages.registerCompletionItemProvider("python",{triggerCharacters:[".","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","[",'"',"'"],provideCompletionItems(e,n){try{const t=p.get(e)??h;return{suggestions:t(n.lineNumber,n.column).map((e=>({...e,insertText:e.label.toString()})))}}catch(t){return console.error(t),null}}}),d.languages.registerDefinitionProvider("python",{provideDefinition(e,n){try{const t=(m.get(e)??g)(n.lineNumber,n.column);return null!=t?{uri:e.uri,range:t}:null}catch(t){return console.error(t),null}}}),d.languages.registerHoverProvider("python",{provideHover:(e,n)=>(y.get(e)??f)(n.lineNumber,n.column)}),d.languages.registerInlayHintsProvider("python",{provideInlayHints:e=>({hints:(b.get(e)??v)(),dispose:()=>{}})}),l.wG.config({monaco:d});const j='\nfrom typing import *\n\ndef test(x: int):\n  return f"{x}"\n\n# reveal_type will produce a type error that tells you the type Pyrefly has\n# computed for the return (in this case, str)\nreveal_type(test(42))\n'.trimStart();async function k(){const e="undefined"!=typeof window?t.e(6370).then(t.bind(t,96370)):new Promise((e=>{}));try{const n=await e;return await n.default(),await n}catch(n){throw console.error(n),n}}let w=null;function N(e){let{sampleFilename:n,isCodeSnippet:t=!1,codeSample:a=j}=e;const l=(0,r.useRef)(null),[x,u]=(0,r.useState)([]),[h,g]=(0,r.useState)(""),[f,v]=(0,r.useState)(!0),[N,q]=(0,r.useState)(null),[L,S]=(0,r.useState)(null),[P,R]=(0,r.useState)(null),[T,$]=(0,r.useState)(!1),[E,M]=(0,r.useState)(""),[O,A]=(0,r.useState)("errors");function D(){if(null!=P&&null!=N){!function(e,n){p.set(e,n)}(P,((e,n)=>N.autoComplete(e,n))),function(e,n){m.set(e,n)}(P,((e,n)=>N.gotoDefinition(e,n))),function(e,n){y.set(e,n)}(P,((e,n)=>N.queryType(e,n))),function(e,n){b.set(e,n)}(P,(()=>N.inlayHint()));try{const e=P.getValue();N.updateSource(e);const n=N.getErrors();d.editor.setModelMarkers(P,"default",function(e){return e.map((e=>({startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.endLineNumber,endColumn:e.endColumn,message:e.message,severity:e.severity})))}(n)),g(""),u(n)}catch(e){console.error(e),g(JSON.stringify(e)),u([])}}}(0,r.useEffect)((()=>{v(!0),w||(w=k()),w.then((e=>{q(new e.State),v(!1),g("")})).catch((e=>{v(!1),g(JSON.stringify(e))}))}),[]),d.editor.onDidCreateModel((e=>{const t=z(n);R(t),D()})),(0,r.useEffect)((()=>{D()}),[N,P]);return(0,o.jsxs)("div",{id:"tryPyrefly-editor",className:"x78zum5 xdt5ytf x98rzlu",children:[(0,o.jsxs)("div",{id:"tryPyrefly-code-editor-container",className:"x1n2onr6 x78zum5 xysyzu8 x7hct1x xo6guvx x5yr21d",children:[C(t,n,a,D,(function(e){const r=z(n);R(r),t&&S(Math.max(50,e.getContentHeight())),l.current=e}),L),!t&&(0,o.jsxs)("div",{className:"x10l6tqk x78zum5 x15zctf7 xfo81ep x16ng2z7 x15u1x8x xlr897v x1v20nzo",children:[(0,o.jsx)(s,{id:"share-url-button",onClick:()=>{const e=window.location.href;return navigator.clipboard.writeText(e)},defaultLabel:"\ud83d\udccb Share URL",successLabel:"\u2713 URL Copied!",ariaLabel:"share URL button"}),(0,o.jsx)(i,{model:P,onActiveTabChange:A,isRunning:T,setIsRunning:$,pythonOutput:E,setPythonOutput:M})]})]}),!t&&(0,o.jsx)(c,{loading:f,goToDef:(e,n,t,r)=>{const o=l.current;if(null===o)return;const s={startLineNumber:e,startColumn:n,endLineNumber:t,endColumn:r};o.revealRange(s),o.setSelection(s)},errors:x,internalError:h,pythonOutput:E,isRunning:T,activeTab:O,setActiveTab:A})]})}function z(e){const n=d.editor.getModels().filter((n=>n?.uri?.path===`/${e}`))[0];if(null==n)return null;const t=function(){if("undefined"==typeof window)return null;const e=new URLSearchParams(window.location.search).get("code");return e?x.decompressFromEncodedURIComponent(e):null}();return null!=t&&null!=n&&n.setValue(t),n.setValue(n.getValue()),n.updateOptions({tabSize:4,insertSpaces:!0}),n}function C(e,n,t,r,s,a){if(e)return(0,o.jsx)(l.Ay,{defaultPath:n,defaultValue:t,defaultLanguage:"python",theme:"vs-light",onChange:r,onMount:s,keepCurrentModel:!0,height:a,options:{readOnly:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}});{const e=window.innerHeight,a=document.querySelector(".navbar"),i=75*(e-(a?.offsetHeight||0))/100;return(0,o.jsx)(l.Ay,{defaultPath:n,defaultValue:t,defaultLanguage:"python",theme:"vs-light",onChange:e=>{r(),"string"==typeof e&&function(e){const n=x.compressToEncodedURIComponent(e),t=`${window.location.pathname}?code=${n}`;window.history.replaceState({},"",t)}(e)},onMount:s,keepCurrentModel:!0,height:i,options:{minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}})}}}}]);