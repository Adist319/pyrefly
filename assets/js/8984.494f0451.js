"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[8984],{98984:(e,n,t)=>{t.r(n),t.d(n,{DEFAULT_PYTHON_PROGRAM:()=>k,default:()=>z,initializePyreflyWasm:()=>w});var r=t(96540),o=(t(32855),t(74848));function s(e){let{id:n,onClick:t,defaultLabel:s,runningLabel:a,disabled:l=!1,ariaLabel:i}=e;const[u,x]=(0,r.useState)(!1);return(0,o.jsx)("button",{id:n,...{0:{className:"x78zum5 x6s0dn4 x1khhgft x1ypdohk x169l3ba xfo81ep xpivpjv x1vqgdyp xyog2rh x1aq8l9j x1v03e3n x1789zll x1com5t6 x1jdwrgt xtfardp x1heor9g x1vnbo0c x16gcxq3 x1fh9xkg xqtax1z"},2:{className:"x78zum5 x6s0dn4 x1khhgft x1ypdohk x169l3ba xfo81ep xpivpjv x1vqgdyp xyog2rh x1aq8l9j x1v03e3n x1789zll x1com5t6 x1cet8bl x1awj2ng x1yurq8p x1vnbo0c x1rpuqfj x4afe7t x1debuo4 xkpkb2g x187oe4h x1fh9xkg xqtax1z"},1:{className:"x78zum5 x6s0dn4 x1khhgft x169l3ba xfo81ep xpivpjv x1vqgdyp xyog2rh x1aq8l9j x1v03e3n x1789zll x1com5t6 x1jdwrgt xtfardp x1heor9g x1vnbo0c x16gcxq3 x1fh9xkg xqtax1z x1h6gzvc"},3:{className:"x78zum5 x6s0dn4 x1khhgft x169l3ba xfo81ep xpivpjv x1vqgdyp xyog2rh x1aq8l9j x1v03e3n x1789zll x1com5t6 x1cet8bl x1awj2ng x1yurq8p x1vnbo0c x1rpuqfj x4afe7t x1debuo4 xkpkb2g x187oe4h x1fh9xkg xqtax1z x1h6gzvc"}}[!!u<<1|!!l],onClick:async function(){if(!l)try{x(!0);const e=new Promise((e=>{setTimeout((()=>{e()}),2e3)}));Promise.all([t(),e]).then((()=>{x(!1)}))}catch(e){console.error("Error in button action:",e)}},"aria-label":i||n,disabled:l,children:(0,o.jsx)("span",{className:"xmtou6a",children:u?a:s})})}const a=e=>{let{setIsRunning:n,setPythonOutput:o}=e;const s=(0,r.useRef)(null),a=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=new Worker(new URL(t.p+t.u(4376),t.b),{type:void 0});return e.onmessage=e=>{const t=e.data;switch(t.type){case"stdout":case"stderr":return void o((e=>e+"\n"+t.output));case"runPython":return!t.success&&t.error&&o((e=>e+"\n"+`Error: ${t.error}`)),n(!1),void(a.current&&(a.current(),a.current=null));default:console.error(`Unknown message type received from worker: ${t}`)}},s.current=e,()=>{e.terminate(),s.current=null}}),[]);return{runPython:(0,r.useCallback)((async e=>{if(s.current)return n(!0),o(""),new Promise((n=>{a.current=n,s.current?.postMessage(e)}))}),[])}};function l(e){let{model:n,onActiveTabChange:t,isRunning:l,setIsRunning:i,setPythonOutput:u}=e;const{runPython:x}=a({setIsRunning:i,setPythonOutput:u}),c=(0,r.useCallback)((async()=>{if(!n)return;t("output"),u("");const e=n.getValue();await x(e)}),[n,t,u,x]);return(0,o.jsx)(s,{id:"run-python-button",onClick:c,defaultLabel:"\u25b6\ufe0f Run",runningLabel:"\u23f3 Running...",disabled:l,ariaLabel:"run Python code button"})}var i=t(68553),u=t(32992),x=t(29030);function c(e){let{error:n,goToDef:t}=e;const{startLineNumber:r,startColumn:s,endLineNumber:a,endColumn:l}=n;let i;i=r===a?s===l?`${r}:${s}`:`${r}:${s}-${l}`:`${r}:${s}-${a}:${l}`;const u=(0,o.jsx)("a",{href:(0,x.default)(`en/docs/error-kinds/#${n.kind}`),target:"_blank",rel:"noopener noreferrer",children:n.kind}),c=`${i}: ${n.message} `;return(0,o.jsxs)("span",{className:"x1ypdohk",onClick:()=>t(r,s,a,l),children:[(0,o.jsx)("span",{className:"x1x2k2ee",children:"ERROR "}),c,"[",u,"]"]})}function d(e){let{loading:n,goToDef:t,errors:r,internalError:s,pythonOutput:a="",isRunning:l=!1,activeTab:i="errors",setActiveTab:u=()=>{}}=e;const x=i,d=null!=r&&r.length>0;return(0,o.jsxs)("div",{id:"tryPyrefly-results-container",className:"xh2ww80 x1n2onr6 xfifm61 x1dt6g3d x134d0co",children:[(0,o.jsx)("div",{className:"x78zum5 xo6guvx x15su7se xif65rj",children:(0,o.jsxs)("ul",{className:"x78zum5 xe8uvvx x1ghz6dp x1717udv x67bb7w",children:[(0,o.jsx)("li",{...{0:{className:"x1oxdvv4 x1ypdohk x117nqv4 x7pa710"},1:{className:"x1oxdvv4 x1ypdohk x117nqv4 x7pa710 x1r7xphn x1x4k32v x1jyxor1"}}[!("errors"!==x)|0],onClick:()=>u("errors"),children:"Errors"}),(0,o.jsx)("li",{...{0:{className:"x1oxdvv4 x1ypdohk x117nqv4 x7pa710"},1:{className:"x1oxdvv4 x1ypdohk x117nqv4 x7pa710 x1r7xphn x1x4k32v x1jyxor1"}}[!("output"!==x)|0],onClick:()=>u("output"),children:"Output"})]})}),(0,o.jsxs)("div",{className:"xysyzu8 x1io82uz",children:[n&&(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"x78zum5 xl56j7k x1anpbxc",children:[(0,o.jsx)("div",{className:"x6jxa94 x1v9usgg xehhe6p xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf xkf7kw9"}),(0,o.jsx)("div",{className:"x6jxa94 x1v9usgg xehhe6p xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf xlzs402"}),(0,o.jsx)("div",{className:"x6jxa94 x1v9usgg xehhe6p xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf"})]})}),!n&&"errors"===x&&(0,o.jsx)("pre",{className:"x2lkgqm xat24cr x78zum5",children:(0,o.jsx)("ul",{className:"xe8uvvx x1ghz6dp x1717udv",children:d?r.map(((e,n)=>(0,o.jsx)("li",{...{0:{},1:{className:"x1anpbxc x889kno xhbnqo4"}}[!!(n>0)|0],children:(0,o.jsx)(c,{error:e,goToDef:t},n)},n))):(0,o.jsx)("li",{children:s?`Pyrefly encountered an internal error: ${s}.`:null==r?"Pyrefly failed to fetch errors.":0===r?.length?"No errors!":null})})}),"output"===x&&(0,o.jsx)("pre",{className:"x2lkgqm xat24cr x78zum5",children:l?(0,o.jsx)("div",{children:"Running..."}):(0,o.jsx)("div",{children:a.trimStart()||"No output, please press the \u25b6\ufe0f Run button."})})]})]})}var h=t(84138);const p=(e,n)=>{throw"not implemented"},g=new Map;const m=(e,n)=>null,f=new Map;const v=(e,n)=>null,y=new Map;const b=()=>[],j=new Map;h.languages.register({id:"python",extensions:[".py"],aliases:["Python"]}),h.languages.registerCompletionItemProvider("python",{triggerCharacters:[".","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","[",'"',"'"],provideCompletionItems(e,n){try{const t=g.get(e)??p;return{suggestions:t(n.lineNumber,n.column).map((e=>({...e,insertText:e.label.toString()})))}}catch(t){return console.error(t),null}}}),h.languages.registerDefinitionProvider("python",{provideDefinition(e,n){try{const t=(f.get(e)??m)(n.lineNumber,n.column);return null!=t?{uri:e.uri,range:t}:null}catch(t){return console.error(t),null}}}),h.languages.registerHoverProvider("python",{provideHover:(e,n)=>(y.get(e)??v)(n.lineNumber,n.column)}),h.languages.registerInlayHintsProvider("python",{provideInlayHints:e=>({hints:(j.get(e)??b)(),dispose:()=>{}})}),i.wG.config({monaco:h});const k='\nfrom typing import *\n\ndef test(x: int):\n  return f"{x}"\n\n# reveal_type will produce a type error that tells you the type Pyrefly has\n# computed for the return (in this case, str)\nreveal_type(test(42))\n'.trimStart();async function w(){const e="undefined"!=typeof window?t.e(6370).then(t.bind(t,96370)):new Promise((e=>{}));try{const n=await e;return await n.default(),await n}catch(n){throw console.error(n),n}}let N=null;function z(e){let{sampleFilename:n,isCodeSnippet:t=!1,codeSample:a=k}=e;const i=(0,r.useRef)(null),[u,x]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,v]=(0,r.useState)(!0),[b,z]=(0,r.useState)(null),[q,R]=(0,r.useState)(null),[L,S]=(0,r.useState)(null),[T,$]=(0,r.useState)(!1),[M,O]=(0,r.useState)(""),[E,A]=(0,r.useState)("errors");function I(){if(null!=L&&null!=b){!function(e,n){g.set(e,n)}(L,((e,n)=>b.autoComplete(e,n))),function(e,n){f.set(e,n)}(L,((e,n)=>b.gotoDefinition(e,n))),function(e,n){y.set(e,n)}(L,((e,n)=>b.queryType(e,n))),function(e,n){j.set(e,n)}(L,(()=>b.inlayHint()));try{const e=L.getValue();b.updateSource(e);const n=b.getErrors();h.editor.setModelMarkers(L,"default",function(e){return e.map((e=>({startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.endLineNumber,endColumn:e.endColumn,message:e.message,severity:e.severity})))}(n)),p(""),x(n)}catch(e){console.error(e),p(JSON.stringify(e)),x([])}}}(0,r.useEffect)((()=>{v(!0),N||(N=w()),N.then((e=>{z(new e.State),v(!1),p("")})).catch((e=>{v(!1),p(JSON.stringify(e))}))}),[]),h.editor.onDidCreateModel((e=>{const t=C(n);S(t),I()})),(0,r.useEffect)((()=>{I()}),[b,L]);return(0,o.jsxs)("div",{id:"tryPyrefly-editor",className:"x78zum5 xdt5ytf x98rzlu",children:[(0,o.jsxs)("div",{id:"tryPyrefly-code-editor-container",className:"x1n2onr6 x78zum5 xysyzu8 x7hct1x xo6guvx x5yr21d",children:[P(t,n,a,I,(function(e){const r=C(n);S(r),t&&R(Math.max(50,e.getContentHeight())),i.current=e}),q),!t&&(0,o.jsxs)("div",{className:"x10l6tqk x78zum5 x15zctf7 xfo81ep x16ng2z7 x15u1x8x xlr897v x1v20nzo",children:[(0,o.jsx)(s,{id:"share-url-button",onClick:()=>{const e=window.location.href;return navigator.clipboard.writeText(e)},defaultLabel:"\ud83d\udccb Share URL",runningLabel:"\u2713 URL Copied!",ariaLabel:"share URL button"}),(0,o.jsx)(l,{model:L,onActiveTabChange:A,isRunning:T,setIsRunning:$,setPythonOutput:O})]})]}),!t&&(0,o.jsx)(d,{loading:m,goToDef:(e,n,t,r)=>{const o=i.current;if(null===o)return;const s={startLineNumber:e,startColumn:n,endLineNumber:t,endColumn:r};o.revealRange(s),o.setSelection(s)},errors:u,internalError:c,pythonOutput:M,isRunning:T,activeTab:E,setActiveTab:A})]})}function C(e){const n=h.editor.getModels().filter((n=>n?.uri?.path===`/${e}`))[0];if(null==n)return null;const t=function(){if("undefined"==typeof window)return null;const e=new URLSearchParams(window.location.search).get("code");return e?u.decompressFromEncodedURIComponent(e):null}();return null!=t&&null!=n&&n.setValue(t),n.setValue(n.getValue()),n.updateOptions({tabSize:4,insertSpaces:!0}),n}function P(e,n,t,r,s,a){if(e)return(0,o.jsx)(i.Ay,{defaultPath:n,defaultValue:t,defaultLanguage:"python",theme:"vs-light",onChange:r,onMount:s,keepCurrentModel:!0,height:a,options:{readOnly:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}});{const e=window.innerHeight,a=document.querySelector(".navbar"),l=75*(e-(a?.offsetHeight||0))/100;return(0,o.jsx)(i.Ay,{defaultPath:n,defaultValue:t,defaultLanguage:"python",theme:"vs-light",onChange:e=>{r(),"string"==typeof e&&function(e){const n=u.compressToEncodedURIComponent(e),t=`${window.location.pathname}?code=${n}`;window.history.replaceState({},"",t)}(e)},onMount:s,keepCurrentModel:!0,height:l,options:{minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}})}}}}]);