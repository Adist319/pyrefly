"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[5353,7734],{5353:(e,n,t)=>{t.r(n),t.d(n,{default:()=>z,initializePyreflyWasm:()=>N});var r=t(96540),o=t(29030),s=(t(32855),t(74848));const a=40;function l(e){let{id:n,onClick:t,defaultLabel:o,runningLabel:a,ariaLabel:l,isRunning:i,setIsRunning:u}=e;void 0!==i&&void 0!==u||([i,u]=(0,r.useState)(!1));const c=i;return(0,s.jsx)("button",{id:n,...{0:{className:"x78zum5 x6s0dn4 x1khhgft x1ypdohk x169l3ba xfo81ep xpivpjv x1vqgdyp xyog2rh x1aq8l9j x1v03e3n x1789zll x1com5t6 x1jdwrgt xtfardp x1heor9g x1vnbo0c x16gcxq3 x1fh9xkg xqtax1z"},2:{className:"x78zum5 x6s0dn4 x1khhgft x1ypdohk x169l3ba xfo81ep xpivpjv x1vqgdyp xyog2rh x1aq8l9j x1v03e3n x1789zll x1com5t6 x1cet8bl x1awj2ng x1yurq8p x1vnbo0c x1rpuqfj x4afe7t x1debuo4 xkpkb2g x187oe4h x1fh9xkg xqtax1z"},1:{className:"x78zum5 x6s0dn4 x1khhgft x169l3ba xfo81ep xpivpjv x1vqgdyp xyog2rh x1aq8l9j x1v03e3n x1789zll x1com5t6 x1jdwrgt xtfardp x1heor9g x1vnbo0c x16gcxq3 x1fh9xkg xqtax1z x1h6gzvc"},3:{className:"x78zum5 x6s0dn4 x1khhgft x169l3ba xfo81ep xpivpjv x1vqgdyp xyog2rh x1aq8l9j x1v03e3n x1789zll x1com5t6 x1cet8bl x1awj2ng x1yurq8p x1vnbo0c x1rpuqfj x4afe7t x1debuo4 xkpkb2g x187oe4h x1fh9xkg xqtax1z x1h6gzvc"}}[!!i<<1|!!c],onClick:async function(){if(!c)try{u(!0);const e=new Promise((e=>{setTimeout((()=>{e()}),2e3)}));Promise.all([t(),e]).then((()=>{u(!1)}))}catch(e){console.error("Error in button action:",e)}},"aria-label":l||n,disabled:c,children:(0,s.jsx)("span",{className:"xmtou6a",children:i?a:o})})}const i=e=>{let{setPythonOutput:n}=e;const o=(0,r.useRef)(null),s=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=new Worker(new URL(t.p+t.u(5028),t.b),{type:void 0});return e.onmessage=e=>{const t=e.data;switch(t.type){case"stdout":case"stderr":return void n((e=>e+"\n"+t.output));case"runPython":return!t.success&&t.error&&n((e=>e+"\n"+`Error: ${t.error}`)),void(s.current&&(s.current(),s.current=null));default:console.error(`Unknown message type received from worker: ${t}`)}},o.current=e,()=>{e.terminate(),o.current=null}}),[]);return{runPython:(0,r.useCallback)((async e=>{if(o.current)return n(""),new Promise((n=>{s.current=n,o.current?.postMessage(e)}))}),[])}};function u(e){let{model:n,onActiveTabChange:t,isRunning:o,setIsRunning:a,setPythonOutput:u}=e;const{runPython:c}=i({setPythonOutput:u}),x=(0,r.useCallback)((async()=>{if(!n)return;t("output"),u("");const e=n.getValue();await c(e)}),[n,t,u,c]);return(0,s.jsx)(l,{id:"run-python-button",onClick:x,defaultLabel:"\u25b6\ufe0f Run",runningLabel:"\u23f3 Running...",ariaLabel:"run Python code button",isRunning:o,setIsRunning:a})}var c=t(68553),x=t(32992);function d(e){let{error:n,goToDef:t}=e;const{startLineNumber:r,startColumn:a,endLineNumber:l,endColumn:i}=n;let u;u=r===l?a===i?`${r}:${a}`:`${r}:${a}-${i}`:`${r}:${a}-${l}:${i}`;const c=(0,s.jsx)("a",{href:(0,o.default)(`en/docs/error-kinds/#${n.kind}`),target:"_blank",rel:"noopener noreferrer",children:n.kind}),x=`${u}: ${n.message} `;return(0,s.jsxs)("span",{className:"x1ypdohk",onClick:()=>t(r,a,l,i),children:[(0,s.jsx)("span",{className:"x1x2k2ee",children:"ERROR "}),x,"[",c,"]"]})}function h(e){let{loading:n,goToDef:t,errors:r,internalError:o,pythonOutput:a="",isRunning:l=!1,activeTab:i="errors",setActiveTab:u=()=>{}}=e;const c=i,x=null!=r&&r.length>0;return(0,s.jsxs)("div",{id:"sandbox-results-container",className:"xh2ww80 x1n2onr6 xfifm61 x1dt6g3d x134d0co",children:[(0,s.jsx)("div",{className:"x78zum5 xo6guvx x15su7se xif65rj",children:(0,s.jsxs)("ul",{className:"x78zum5 xe8uvvx x1ghz6dp x1717udv x67bb7w",children:[(0,s.jsx)("li",{...{0:{className:"x1oxdvv4 x1ypdohk x117nqv4 x7pa710"},1:{className:"x1oxdvv4 x1ypdohk x117nqv4 x7pa710 x1r7xphn x1x4k32v x1jyxor1"}}[!("errors"!==c)|0],onClick:()=>u("errors"),children:"Typechecking Errors"}),(0,s.jsx)("li",{...{0:{className:"x1oxdvv4 x1ypdohk x117nqv4 x7pa710"},1:{className:"x1oxdvv4 x1ypdohk x117nqv4 x7pa710 x1r7xphn x1x4k32v x1jyxor1"}}[!("output"!==c)|0],onClick:()=>u("output"),children:"Runtime Output"})]})}),(0,s.jsxs)("div",{className:"xysyzu8 x1io82uz",children:[n&&(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"x78zum5 xl56j7k x1anpbxc",children:[(0,s.jsx)("div",{className:"x6jxa94 x1v9usgg xehhe6p xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf xkf7kw9"}),(0,s.jsx)("div",{className:"x6jxa94 x1v9usgg xehhe6p xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf xlzs402"}),(0,s.jsx)("div",{className:"x6jxa94 x1v9usgg xehhe6p xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf"})]})}),!n&&"errors"===c&&(0,s.jsx)("pre",{className:"x2lkgqm xat24cr",children:(0,s.jsx)("ul",{className:"xe8uvvx x1ghz6dp x1717udv",children:x?r.map(((e,n)=>(0,s.jsx)("li",{...{0:{},1:{className:"x1anpbxc x889kno xhbnqo4"}}[!!(n>0)|0],children:(0,s.jsx)(d,{error:e,goToDef:t},n)},n))):(0,s.jsx)("li",{children:o?`Pyrefly encountered an internal error: ${o}.`:null==r?"Pyrefly failed to fetch errors.":0===r?.length?"No errors!":null})})}),"output"===c&&(0,s.jsxs)("pre",{className:"x2lkgqm xat24cr",children:[(0,s.jsx)("span",{className:"x1jgedgx",children:"Note: The Python runtime currently only supports features up to Python version 3.12, features from newer versions are not available. \n\n"}),l?"Running...":a.trimStart()||"No output, please press the \u25b6\ufe0f Run button."]})]})]})}var p=t(84138);const g=(e,n)=>{throw"not implemented"},f=new Map;const m=(e,n)=>null,y=new Map;const v=(e,n)=>null,b=new Map;const w=()=>[],k=new Map;p.languages.register({id:"python",extensions:[".py"],aliases:["Python"]}),p.languages.registerCompletionItemProvider("python",{triggerCharacters:[".","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","[",'"',"'"],provideCompletionItems(e,n){try{const t=f.get(e)??g;return{suggestions:t(n.lineNumber,n.column).map((e=>({...e,insertText:e.label.toString()})))}}catch(t){return console.error(t),null}}}),p.languages.registerDefinitionProvider("python",{provideDefinition(e,n){try{const t=(y.get(e)??m)(n.lineNumber,n.column);return null!=t?{uri:e.uri,range:t}:null}catch(t){return console.error(t),null}}}),p.languages.registerHoverProvider("python",{provideHover:(e,n)=>(b.get(e)??v)(n.lineNumber,n.column)}),p.languages.registerInlayHintsProvider("python",{provideInlayHints:e=>({hints:(k.get(e)??w)(),dispose:()=>{}})}),c.wG.config({monaco:p});const j='\n# Welcome to the Pyrefly Sandbox, this is a page\n# where you can write, share and learn about typing in Python.\n#\n# Here are a couple features of this sandbox:\n# - Get real-time type checking feedback\n# - Use reveal_type() to inspect inferred types\n# - experiment with the IDE features that we support (e.g. autocomplete, go-to-definition, hover, etc)\n# - Write and run Python code directly in your browser\n\nfrom typing import *\n\ndef test(x: int):\n  return f"{x}"\n\n# reveal_type will produce a type error that tells you the type Pyrefly has\n# computed for the return (in this case, str)\nreveal_type(test(42))\n'.trimStart();async function N(){const e="undefined"!=typeof window?t.e(3190).then(t.bind(t,93190)):new Promise((e=>{}));try{const n=await e;return await n.default(),await n}catch(n){throw console.error(n),n}}let q=null;function z(e){let{sampleFilename:n,isCodeSnippet:t=!1,codeSample:o=j}=e;const i=(0,r.useRef)(null),[u,c]=(0,r.useState)([]),[x,d]=(0,r.useState)(""),[g,m]=(0,r.useState)(!0),[v,w]=(0,r.useState)(null),[z,C]=(0,r.useState)(null),[M,E]=(0,r.useState)(null),[A,I]=(0,r.useState)(!1),[V,U]=(0,r.useState)(""),[D,H]=(0,r.useState)("errors"),[W,_]=(0,r.useState)(!1);function B(){if(null!=M&&null!=v){!function(e,n){f.set(e,n)}(M,((e,n)=>v.autoComplete(e,n))),function(e,n){y.set(e,n)}(M,((e,n)=>v.gotoDefinition(e,n))),function(e,n){b.set(e,n)}(M,((e,n)=>v.queryType(e,n))),function(e,n){k.set(e,n)}(M,(()=>v.inlayHint()));try{const e=M.getValue();v.updateSource(e);const n=v.getErrors();p.editor.setModelMarkers(M,"default",function(e){return e.map((e=>({startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.endLineNumber,endColumn:e.endColumn,message:e.message,severity:e.severity})))}(n)),d(""),c(n)}catch(e){console.error(e),d(JSON.stringify(e)),c([])}}}(0,r.useEffect)((()=>{m(!0),q||(q=N()),q.then((e=>{w(new e.State),m(!1),d("")})).catch((e=>{m(!1),d(JSON.stringify(e))}))}),[]),p.editor.onDidCreateModel((e=>{const t=L(n);E(t),B()})),(0,r.useEffect)((()=>{B()}),[v,M]);return(0,s.jsxs)("div",{id:"sandbox-editor",className:"x78zum5 xdt5ytf x98rzlu",children:[(0,s.jsxs)("div",{id:"sandbox-code-editor-container",className:"x1n2onr6 x78zum5 xysyzu8 x7hct1x xo6guvx x5yr21d",onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:[R(t,n,o,B,(function(e){const r=L(n);if(E(r),t){const n=P()?a+5:0;C(Math.max(50,e.getContentHeight()+n))}i.current=e}),z),(0,s.jsxs)("div",{...{0:{className:"x10l6tqk x78zum5 x1q0g3np x1n327nk xmhk92p xk6ci0l xg01cxk xlshs6z x17ce4s4"},2:{className:"x10l6tqk x78zum5 x1q0g3np x1n327nk x191j7n5 xn5hqff xg01cxk xlshs6z x17ce4s4"},1:{className:"x10l6tqk x78zum5 x1q0g3np x1n327nk xmhk92p xk6ci0l x1hc1fzr xnpuxes x17ce4s4"},3:{className:"x10l6tqk x78zum5 x1q0g3np x1n327nk x191j7n5 xn5hqff x1hc1fzr xnpuxes x17ce4s4"}}[!!P()<<1|!(t&&!W&&!P())],children:[t?null:$(M,H,A,I,U),t?null:(0,s.jsx)(l,{id:"share-url-button",onClick:()=>{const e=window.location.href;return navigator.clipboard.writeText(e)},defaultLabel:"\ud83d\udccb Share URL",runningLabel:"\u2713 URL Copied!",ariaLabel:"share URL button"}),t?(0,s.jsx)(S,{model:M}):null,t?T(M):null,t&&P()?null:O(M,B,o,t)]})]}),!t&&(0,s.jsx)(h,{loading:g,goToDef:(e,n,t,r)=>{const o=i.current;if(null===o)return;const s={startLineNumber:e,startColumn:n,endLineNumber:t,endColumn:r};o.revealRange(s),o.setSelection(s)},errors:u,internalError:x,pythonOutput:V,isRunning:A,activeTab:D,setActiveTab:H})]})}function C(e){const n=x.compressToEncodedURIComponent(e),t=`${window.location.pathname}?code=${n}`;window.history.replaceState({},"",t)}function L(e){const n=p.editor.getModels().filter((n=>n?.uri?.path===`/${e}`))[0];if(null==n)return null;const t=function(){if("undefined"==typeof window)return null;const e=new URLSearchParams(window.location.search).get("code");return e?x.decompressFromEncodedURIComponent(e):null}();return null!=t&&null!=n&&n.setValue(t),n.setValue(n.getValue()),n.updateOptions({tabSize:4,insertSpaces:!0}),n}function P(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function R(e,n,t,r,o,a){if(e)return(0,s.jsx)(c.Ay,{defaultPath:n,defaultValue:t,defaultLanguage:"python",theme:"vs-light",onChange:r,onMount:o,keepCurrentModel:!0,height:a,options:{readOnly:P(),domReadOnly:P(),minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}});{const e=window.innerHeight,a=document.querySelector(".navbar"),l=75*(e-(a?.offsetHeight||0))/100;return(0,s.jsx)(c.Ay,{defaultPath:n,defaultValue:t,defaultLanguage:"python",theme:"vs-light",onChange:e=>{r(),"string"==typeof e&&C(e)},onMount:o,keepCurrentModel:!0,height:l,options:{minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}})}}function S(e){let{model:n}=e;const t=(0,o.default)("try/");return(0,s.jsx)(l,{id:"open-sandbox-button",onClick:async()=>{if(n){const e=n.getValue(),r=x.compressToEncodedURIComponent(e),o=t+`?code=${r}`;window.location.href=o}return Promise.resolve()},defaultLabel:"\ud83e\uddea Open in Sandbox",runningLabel:"\u23f3 Opening Sandbox...",ariaLabel:"open in sandbox"})}function $(e,n,t,r,o){return(0,s.jsx)(u,{model:e,onActiveTabChange:n,isRunning:t,setIsRunning:r,setPythonOutput:o})}function T(e){return(0,s.jsx)(l,{id:"copy-code-button",onClick:async()=>{if(e){const n=e.getValue();await navigator.clipboard.writeText(n)}return Promise.resolve()},defaultLabel:"\ud83d\udccb Copy",runningLabel:"\u2713 Copied!",ariaLabel:"copy code to clipboard"})}function O(e,n,t,r){return(0,s.jsx)(l,{id:"reset-button",onClick:async()=>{e&&(e.setValue(t),r||C(t),n())},defaultLabel:"\ud83d\udd04 Reset",runningLabel:"\u2713 Reset!",ariaLabel:"reset to default code"})}},32855:(e,n,t)=>{t.d(n,{xk:()=>i});var r,o={};var s=function(){if(r)return o;r=1,Object.defineProperty(o,"__esModule",{value:!0}),o.styleq=void 0;var e=new WeakMap;function n(n){var t,r,o;return null!=n&&(t=!0===n.disableCache,r=!0===n.disableMix,o=n.transform),function(){for(var n=[],s="",a=null,l="",i=t?null:e,u=new Array(arguments.length),c=0;c<arguments.length;c++)u[c]=arguments[c];for(;u.length>0;){var x=u.pop();if(null!=x&&!1!==x)if(Array.isArray(x))for(var d=0;d<x.length;d++)u.push(x[d]);else{var h=null!=o?o(x):x;if(null!=h.$$css){var p="";if(null!=i&&i.has(h)){var g=i.get(h);null!=g&&(p=g[0],l=g[2],n.push.apply(n,g[1]),i=g[3])}else{var f=[];for(var m in h){var y=h[m];if("$$css"!==m)"string"==typeof y||null===y?n.includes(m)||(n.push(m),null!=i&&f.push(m),"string"==typeof y&&(p+=p?" "+y:y)):console.error("styleq: ".concat(m," typeof ").concat(String(y),' is not "string" or "null".'));else{var v=h[m];!0!==v&&(l=l?v+"; "+l:v)}}if(null!=i){var b=new WeakMap;i.set(h,[p,f,l,b]),i=b}}p&&(s=s?p+" "+s:p)}else if(r)null==a&&(a={}),a=Object.assign({},h,a);else{var w=null;for(var k in h){var j=h[k];void 0!==j&&(n.includes(k)||(null!=j&&(null==a&&(a={}),null==w&&(w={}),w[k]=j),n.push(k),i=null))}null!=w&&(a=Object.assign(w,a))}}}return[s,a,l]}}return(o.styleq=n()).factory=n,o}();const a=e=>new Error(`Unexpected 'stylex.${e}' call at runtime. Styles must be compiled by '@stylexjs/babel-plugin'.`),l=e=>a(`types.${e}`);function i(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const[r,o,a]=s.styleq(n),l={};return null!=r&&""!==r&&(l.className=r),null!=o&&Object.keys(o).length>0&&(l.style=o),null!=a&&""!==a&&(l["data-style-src"]=a),l}const u={angle:e=>{throw l("angle")},color:e=>{throw l("color")},url:e=>{throw l("url")},image:e=>{throw l("image")},integer:e=>{throw l("integer")},lengthPercentage:e=>{throw l("lengthPercentage")},length:e=>{throw l("length")},percentage:e=>{throw l("percentage")},number:e=>{throw l("number")},resolution:e=>{throw l("resolution")},time:e=>{throw l("time")},transformFunction:e=>{throw l("transformFunction")},transformList:e=>{throw l("transformList")}};function c(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const[r]=s.styleq(n);return r}c.attrs=function(){const{className:e,"data-style-src":n,style:t}=i(...arguments),r={};return null!=e&&""!==e&&(r.class=e),null!=t&&Object.keys(t).length>0&&(r.style=Object.keys(t).map((e=>`${e}:${t[e]};`)).join("")),null!=n&&""!==n&&(r["data-style-src"]=n),r},c.create=function(e){throw a("create")},c.createTheme=(e,n)=>{throw a("createTheme")},c.defineVars=function(e){throw a("defineVars")},c.firstThatWorks=function(){throw a("firstThatWorks")},c.keyframes=e=>{throw a("keyframes")},c.props=i,c.types=u}}]);