"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[8660],{8660:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"migrating-from-pyright","title":"Migrating from Pyright","description":"How to switch from Pyright to Pyrefly","source":"@site/docs/migrating-from-pyright.mdx","sourceDirName":".","slug":"/migrating-from-pyright","permalink":"/en/docs/migrating-from-pyright","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/pyrefly/edit/main/website/docs/migrating-from-pyright.mdx","tags":[],"version":"current","frontMatter":{"title":"Migrating from Pyright","description":"How to switch from Pyright to Pyrefly"}}');var s=i(74848),t=i(28453);const o={title:"Migrating from Pyright",description:"How to switch from Pyright to Pyrefly"},l=void 0,a={},c=[{value:"Running Pyrefly",id:"running-pyrefly",level:2},{value:"Pyright Config Migration",id:"pyright-config-migration",level:2},{value:"Config Migration Details",id:"config-migration-details",level:2},{value:"Silencing Errors",id:"silencing-errors",level:2}];function h(e){const r={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h2,{id:"running-pyrefly",children:"Running Pyrefly"}),"\n",(0,s.jsx)(r.p,{children:"Like pyright, pyrefly can be given a list of files to check:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sh",children:"$ pyrefly check file1.py file2.py\n"})}),"\n",(0,s.jsx)(r.p,{children:"The easiest way to run pyrefly on all files in a project is to run it from the project root:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sh",children:"$ cd your/project\n$ pyrefly check\n"})}),"\n",(0,s.jsx)(r.p,{children:"Pyrefly doesn't need a config file to start checking your code. Its sensible defaults are designed to work well for most projects.\nHowever, projects with existing pyright configs may want to configure pyrefly to suit their own needs."}),"\n",(0,s.jsx)(r.h2,{id:"pyright-config-migration",children:"Pyright Config Migration"}),"\n",(0,s.jsx)(r.p,{children:"To make it as easy as possible to get started with pyrefly, we've provided a script for automatically migrating a pyright config to pyrefly."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sh",children:"$ pyrefly config-migration path/to/your/pyrightconfig.json\n"})}),"\n",(0,s.jsxs)(r.p,{children:["This will load your existing ",(0,s.jsx)(r.code,{children:"pyrightconfig.json"})," and transform it into a ",(0,s.jsx)(r.code,{children:"pyrefly.toml"})," while preserving as many options as possible. See ",(0,s.jsx)(r.code,{children:"config-migration --help"})," for more options."]}),"\n",(0,s.jsx)(r.p,{children:"There is a significant overlap between pyright's and pyrefly's configuration options, so migration is pretty straightforward. However, it may be worth checking the generated config for errors, just in case."}),"\n",(0,s.jsxs)(r.p,{children:["If you'd rather start fresh with a hand-written config, please see the ",(0,s.jsx)(r.a,{href:"../configuration",children:"pyrefly configuration docs"}),". If you run into any issues with config migration, please ",(0,s.jsx)(r.a,{href:"https://github.com/facebook/pyrefly/issues",children:"let us know"}),"!"]}),"\n",(0,s.jsx)(r.h2,{id:"config-migration-details",children:"Config Migration Details"}),"\n",(0,s.jsx)(r.p,{children:"When it comes to listing files, pyright uses just paths, while pyrefly supports glob patterns. Thankfully, paths are a subset of glob patterns, so pyrefly can just use the paths as-is. You could consider manually simplifying the paths into glob patterns, but it's not necessary."}),"\n",(0,s.jsxs)(r.p,{children:["Pyright supports four platforms: Windows, Linux, Darwin (macOS), and All. Since pyrefly only supports Python's ",(0,s.jsx)(r.a,{href:"https://docs.python.org/3/library/sys.html#sys.platform",children:"supported platforms"}),', we choose to treat "All" as "linux".']}),"\n",(0,s.jsx)(r.h2,{id:"silencing-errors",children:"Silencing Errors"}),"\n",(0,s.jsxs)(r.p,{children:["Like pyright, pyrefly has ways to silence specific error codes. Full details can be found in the ",(0,s.jsx)(r.a,{href:"../error-suppresions",children:"Error Suppression docs"}),"."]}),"\n",(0,s.jsx)(r.p,{children:"To silence an error on a specific line, add a disable comment above that line:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"# pyrefly: ignore\nx: str = 1\n"})}),"\n",(0,s.jsx)(r.p,{children:"To suppress all instances of an error, disable that error in the config:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"[errors]\nimport-error = false\n"})}),"\n",(0,s.jsxs)(r.p,{children:["This is similar to pyright's ",(0,s.jsx)(r.a,{href:"https://microsoft.github.io/pyright/#/configuration?id=type-check-rule-overrides",children:"type check rule overrides"}),", though of course the ",(0,s.jsx)(r.a,{href:"../error-kinds",children:"error codes"})," are different!"]})]})}function p(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);