"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[7632],{27632:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"installation","title":"Installation","description":"How to install Pyrefly","source":"@site/docs/installation.mdx","sourceDirName":".","slug":"/installation","permalink":"/en/docs/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/pyrefly/edit/main/website/docs/installation.mdx","tags":[],"version":"current","frontMatter":{"title":"Installation","description":"How to install Pyrefly"},"sidebar":"docsSidebar","previous":{"title":"Typing Features and PEPS","permalink":"/en/docs/python-features-and-peps"},"next":{"title":"Configuration","permalink":"/en/docs/configuration"}}');var o=r(74848),i=r(28453);const s={title:"Installation",description:"How to install Pyrefly"},l=void 0,a={},c=[{value:"Upgrading Pyrefly",id:"upgrading-pyrefly",level:2},{value:"This will add <code> # pyrefly: ignore</code> comments to your code that will enable you to silence errors, and come back and fix them at a later date. This can make the process of upgrading a large codebase much more manageable.",id:"this-will-add---pyrefly-ignore-comments-to-your-code-that-will-enable-you-to-silence-errors-and-come-back-and-fix-them-at-a-later-date-this-can-make-the-process-of-upgrading-a-large-codebase-much-more-manageable",level:2},{value:"Add Pyrefly to CI",id:"add-pyrefly-to-ci",level:2},{value:"A few notes about this setup:",id:"a-few-notes-about-this-setup",level:3}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["If you want to experiment with our tool, the easiest way to install Pyrefly is via ",(0,o.jsx)(n.code,{children:"pip"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"pip install pyrefly\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Then, ",(0,o.jsx)(n.code,{children:"cd"})," into the directory or project you would like to type check and run"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"pyrefly check\n"})}),"\n",(0,o.jsxs)(n.p,{children:["You'll want to set up a basic configuration file to type check your project. You can add configuration options to a ",(0,o.jsx)(n.code,{children:"pyproject.toml"})," file, or create a ",(0,o.jsx)(n.code,{children:"pyrefly.toml"})," file in your project directory."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'[tool.pyrefly]\nsearch_path = [\n    "example_directory/..."\n]\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Then, simply run ",(0,o.jsx)(n.code,{children:"pyrefly check"}),", this time the tool will use your configuration options."]}),"\n",(0,o.jsx)(n.p,{children:"It's likely the tool will return a list of type errors, this is perfectly normal. At this point you have a few options:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Silence the errors using ",(0,o.jsx)(n.code,{children:"# pyrefly: ignore"})," comments. This will get your project to a clean type checking state and you can drive down the number of errors as you go. We've included a script that can do this for you:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"pyrefly check --suppress-errors\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsx)(n.li,{children:"Use extra configuration options to silence specific categories of errors, or exclude files with more errors than average."}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"upgrading-pyrefly",children:"Upgrading Pyrefly"}),"\n",(0,o.jsx)(n.p,{children:"Upgrading the version of Pyrefly you're using, or a third party library you depend on can surface new type errors in your code. Fixing them all at once is often not realistic. We've written scripts to help you temporarily silence them."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"# step 1\npyrefly check --suppress-errors\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"# step 2\n<run your formatter of choice>\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"# step 3\npyrefly check --remove-unused-ignores\n"})}),"\n",(0,o.jsx)(n.p,{children:"Repeat the steps above until you get a clean formatting run and a clean type check."}),"\n",(0,o.jsxs)(n.h2,{id:"this-will-add---pyrefly-ignore-comments-to-your-code-that-will-enable-you-to-silence-errors-and-come-back-and-fix-them-at-a-later-date-this-can-make-the-process-of-upgrading-a-large-codebase-much-more-manageable",children:["This will add ",(0,o.jsx)(n.code,{children:" # pyrefly: ignore"})," comments to your code that will enable you to silence errors, and come back and fix them at a later date. This can make the process of upgrading a large codebase much more manageable."]}),"\n",(0,o.jsx)(n.h2,{id:"add-pyrefly-to-ci",children:"Add Pyrefly to CI"}),"\n",(0,o.jsx)(n.p,{children:"Once your project passes type checks without errors, you can ensure no new bugs are introduced. This is best enforced through CI (Continuous Integration) to prevent other maintainers from merging code with errors. Here is an example for GitHub."}),"\n",(0,o.jsx)(n.p,{children:"Save your workflow in this path in your repository:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:".github/workflows/typecheck.yml\n"})}),"\n",(0,o.jsxs)(n.p,{children:["GitHub automatically detects any ",(0,o.jsx)(n.code,{children:".yml"})," files inside ",(0,o.jsx)(n.code,{children:".github/workflows/"})," and sets up the defined workflows."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"name: Pyrefly Type Check\n\non:\n  pull_request:\n    branches: [main]\n  workflow_dispatch:  # Allows manual triggering from the GitHub UI\n\njobs:\n  typecheck:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Check out code\n        uses: actions/checkout@v4\n\n      - name: Set up Python\n        uses: actions/setup-python@v5\n\n      # Install Python dependencies and create environment\n      - name: Install dependencies and run pytest\n        run: |\n          python -m venv .venv\n          source .venv/bin/activate\n          python -m pip install --upgrade pip\n          # Install your dependencies; adjust the following lines as needed\n          pip install -r requirements-dev.txt\n\n      - name: Install Pyrefly\n        run: pip install pyrefly\n\n      - name: Run Pyrefly Type Checker\n        run: pyrefly check\n"})}),"\n",(0,o.jsx)(n.h3,{id:"a-few-notes-about-this-setup",children:"A few notes about this setup:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Building your environment and installing dependencies will enhance type safety by checking the types of imports. ",(0,o.jsx)(n.em,{children:"This is not required, but encouraged!"})]}),"\n",(0,o.jsxs)(n.li,{children:["Simply drop in ",(0,o.jsx)(n.code,{children:"pyrefly check"})," to existing workflows that build and test your environment."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"      - name: Run Pyrefly Type Checker\n        run: pyrefly check\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Your ",(0,o.jsx)(n.code,{children:"pyrefly.toml"})," or pyrefly configs in your ",(0,o.jsx)(n.code,{children:"pyproject.toml"})," will be automatically detected. Learn how to ",(0,o.jsx)(n.a,{href:"../configuration",children:"configure pyrefly here"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);