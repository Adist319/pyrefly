<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-configuration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Configuration | Pyrefly</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://pyrefly.org/en/docs/configuration/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configuration | Pyrefly"><meta data-rh="true" name="description" content="Instructions for configuring Pyrefly"><meta data-rh="true" property="og:description" content="Instructions for configuring Pyrefly"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://pyrefly.org/en/docs/configuration/"><link data-rh="true" rel="alternate" href="https://pyrefly.org/en/docs/configuration/" hreflang="en"><link data-rh="true" rel="alternate" href="https://pyrefly.org/en/docs/configuration/" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GSX14JC495"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GSX14JC495",{anonymize_ip:!0})</script>









<link rel="stylesheet" href="/stylex.css"><link rel="stylesheet" href="/assets/css/styles.fe6135f1.css">
<script src="/assets/js/runtime~main.5dc15d71.js" defer="defer"></script>
<script src="/assets/js/main.790224c2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Pyrefly</b></a><a class="navbar__item navbar__link" href="/en/docs/learn-python-typing/">Learn Python Typing</a><a class="navbar__item navbar__link" href="/try/">Try</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/pyrefly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__icon github__link" aria-label="GitHub"></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Pyrefly Configuration</h1></header>
<p>Pyrefly has a basic configuration that can (or will) allow you to customize your
Pyrefly runs without having to specify all of your arguments on the command
line.</p>
<p>NOTE: this is early in its development, so the options listed here are subject
to change in name, usage, type, quantity, and structure.</p>
<p>Configurations can be specified in a <a href="https://toml.io/en/" target="_blank" rel="noopener noreferrer">TOML file</a> at the root of
your project (or elsewhere, as long as the <code>search_path</code> is correct) named
<code>pyrefly.toml</code>, with all configuration options in the top-level of the document.
You can also specify a configuration in a <code>pyproject.toml</code> under a <code>[tool.pyrefly]</code>
section. Other config names can be used when explicitly passing in the config file
name with the <code>--config</code>/<code>-c</code> flag, but they will not be automatically found by
<a href="#configuration-finding">Configuration Finding</a>.</p>
<p>Both absolute and config-relative paths are supported.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="precedence-in-options">Precedence in Options<a href="#precedence-in-options" class="hash-link" aria-label="Direct link to Precedence in Options" title="Direct link to Precedence in Options">​</a></h2>
<p>The following is the order in which configuration options are selected:</p>
<ol>
<li>CLI flag</li>
<li>Environment variable override -- This is the same as <code>PYRE_&lt;CLI flag name&gt;</code></li>
<li>Configuration option</li>
<li>Hard-coded default</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-finding">Configuration Finding<a href="#configuration-finding" class="hash-link" aria-label="Direct link to Configuration Finding" title="Direct link to Configuration Finding">​</a></h2>
<p>In both project checking mode (with no explicit configuration supplied) and
single-file checking mode, we perform an upward file search to find a
configuration file. We check each directory from the start location to the
filesystem root, looking first for <code>pyrefly.toml</code> then <code>pyproject.toml</code>, in
the same directory before looking at its parent.</p>
<p>For project checking mode, the start location is the CWD. We do not perform any
searching if the <code>--config</code>/<code>-c</code> flag is used. For single-file checking mode,
the start location is the directory containing the file to be type checked. No
config flag can be passed into Pyrefly in single file checking mode.</p>
<p>If a <code>pyrefly.toml</code> is found, it is parsed and used for type checking, and will
return an error to the user on invalid types, syntax, or values.</p>
<p>If a <code>pyproject.toml</code> is found, Pyrefly will stop searching, even if no <code>[tool.pyrefly]</code>
section is found. The same errors will be returned as when loading a <code>pyrefly.toml</code> if
the config is invalid.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-options">Configuration Options<a href="#configuration-options" class="hash-link" aria-label="Direct link to Configuration Options" title="Direct link to Configuration Options">​</a></h2>
<ul>
<li><code>project_includes</code>: the glob patterns used to describe which files to type
check, typically understood as user-space files. This takes highest precedence
in import resolution.<!-- -->
<ul>
<li>Type: list of Unix Glob patterns</li>
<li>Default: <code>[&quot;**/*.py&quot;]</code></li>
<li>Flag equivalent: <code>FILES...</code> argument</li>
<li>Equivalent configs: <code>include</code> in Pyright, <code>files</code>/<code>modules</code>/<code>packages</code> in
mypy</li>
<li>Notes:<!-- -->
<ul>
<li>When overridden by passing in <code>FILES...</code>, we do not consult the
relevant config file for what to use for <code>project_excludes</code>. If
<code>project_excludes</code> should not use the default value, override it with the flag as
well.</li>
<li>When a <code>project_includes</code> pattern does not match any files, we will return
an error.</li>
</ul>
</li>
</ul>
</li>
<li><code>project_excludes</code>: the glob patterns used to describe which files to avoid
type checking, usually as a more fine-grained way of controlling the files you
get type errors on.<!-- -->
<ul>
<li>Type: list of Unix Glob patterns</li>
<li>Default: <code>[&quot;**/__pycache__/**&quot;, &quot;**/.*&quot;]</code></li>
<li>Flag equivalent: <code>--project-excludes</code></li>
<li>Equivalent configs: <code>exclude</code> in Pyright and mypy</li>
<li>Notes:<!-- -->
<ul>
<li>We match on these patterns, unlike <code>project_includes</code>, where we
enumerate all (Python) files under the directory. Because of this,
<code>project_excludes</code> does not do directory matching unless a <code>/</code> is added at
the end of your glob pattern. <code>**/__pycache__/</code> will only match files under
a directory named <code>__pycache__/</code>, but not a file named <code>__pycache__</code>.
Likewise, <code>**/__pycache__</code> will only match files named <code>__pycache__</code>, but
not files under a directory named <code>__pycache__/</code>.</li>
<li>It is an error if no files are returned from any <code>project_includes</code> because
they are filtered out by <code>project_excludes</code> entries.</li>
<li>When passing in <code>FILES...</code>, we also do not consult the config file for
what to use for <code>project_excludes</code>. If <code>project_excludes</code> should not use
the default value, override it with a flag as well.</li>
</ul>
</li>
</ul>
</li>
<li><code>search_path</code>: a file path describing a root from which imports should be
found and imported from (including modules in <code>project_includes</code>). This takes
the highest precedence in import order, before <code>typeshed</code> and
<code>site_package_path</code>. When a <code>project_includes</code> type checked file is imported
by another type checked file, we check all search roots to determine how to
import it.<!-- -->
<ul>
<li>Type: list of directories</li>
<li>Default: <code>[&quot;.&quot;]</code></li>
<li>Flag equivalent: <code>--search-path</code></li>
<li>ENV equivalent: <code>PYRE_SEARCH_PATH</code></li>
<li>Equivalent configs: <code>extraPaths</code> in Pyright, <code>mypy_path</code> in mypy</li>
<li>Notes: we automatically append <code>&quot;.&quot;</code> (the directory containing the
configuration file) to the <code>search_roots</code> when type checking as a sensible
default and last attempt at an import.</li>
</ul>
</li>
<li><code>site_package_path</code>: a file path describing a root from which imports should
be found and imported from. This takes the lowest priority in import
resolution, after <code>project_includes</code>, <code>typeshed</code>, and <code>search_roots</code>.<!-- -->
<ul>
<li>Type: list of directories</li>
<li>Default: result from <a href="#environment-autoconfiguration">Environment Autoconfiguration</a> or <code>[]</code></li>
<li>Flag equivalent: <code>--site-package-path</code></li>
<li>ENV equivalent: <code>PYRE_SITE_PACKAGE_PATH</code></li>
<li>Equivalent configs: none</li>
</ul>
</li>
<li><code>python_platform</code>: the value used with conditions based on type checking
against
<a href="https://docs.python.org/3/library/sys.html#sys.platform" target="_blank" rel="noopener noreferrer"><code>sys.platform</code></a>
values.<!-- -->
<ul>
<li>Type: string</li>
<li>Default: result from <a href="#environment-autoconfiguration">Environment Autoconfiguration</a> or &quot;linux&quot;</li>
<li>Flag equivalent: <code>--python-platform</code></li>
<li>ENV equivalent: <code>PYRE_PYTHON_PLATFORM</code></li>
<li>Equivalent configs: <code>pythonPlatform</code> in Pyright, <code>platform</code> in mypy</li>
</ul>
</li>
<li><code>python_version</code>: the value used with conditions based on type checking
against
<a href="https://docs.python.org/3/library/sys.html#sys.version" target="_blank" rel="noopener noreferrer"><code>sys.version</code></a>
values. The format should be <code>&lt;major&gt;[.&lt;minor&gt;[.&lt;micro&gt;]]</code>, where minor and
micro can be omitted to take the default positional value.<!-- -->
<ul>
<li>Type: string</li>
<li>Default: result from <a href="#environment-autoconfiguration">Environment Autoconfiguration</a> or <code>3.13.0</code></li>
<li>Flag equivalent: <code>--python-version</code></li>
<li>ENV equivalent: <code>PYRE_PYTHON_VERSION</code></li>
<li>Equivalent configs: <code>pythonVersion</code> in Pyright, <code>python_version</code> in mypy</li>
</ul>
</li>
<li><code>python_interpreter</code>: the Python interpreter to query when attempting to autoconfigure
Python environment values (<code>site_package_path</code>, <code>python_platform</code>, <code>python_version</code>).
See the <a href="#environment-autoconfiguration">Environment Autoconfiguration section</a> for more information.<!-- -->
<ul>
<li>Type: string of executable or path to executable</li>
<li>Default: <code>python3</code></li>
<li>Flag equivalent: <code>--python-interpreter</code></li>
<li>ENV equivalent: <code>PYRE_PYTHON_INTERPRETER</code></li>
<li>Equivalent configs: <code>python_executable</code> in mypy</li>
<li>Notes:<!-- -->
<ul>
<li>This executes the value present in the <code>python_interpreter</code> field without any checks. It could
be a security risk if your <code>python_interpreter</code> executes an arbitrary executable.</li>
<li>If you are working on a project shared between multiple people, it is likely best not to use this
option, since there might be different Python interpreter versions used on different systems. Instead,
we recommend explicitly setting <code>python_version</code>, <code>python_platform</code>, and <code>site_package_path</code>, or using
alternative methods of environment autoconfiguration (coming soon).</li>
</ul>
</li>
</ul>
</li>
<li><code>errors</code>: configure (enable and disable) the errors Pyrefly shows<!-- -->
<ul>
<li>Type: Table of error code name to boolean representing enabled status</li>
<li>Default: <code>errors = {}</code></li>
<li>Flag equivalent: none</li>
<li>ENV equivalent: none</li>
<li>Equivalent configs:
<a href="https://microsoft.github.io/pyright/#/configuration?id=type-check-rule-overrides" target="_blank" rel="noopener noreferrer">type check rule overrides</a>
and <a href="https://microsoft.github.io/pyright/#/configuration?id=type-evaluation-settings" target="_blank" rel="noopener noreferrer">type evaluation settings</a>
in Pyright,
<a href="https://mypy.readthedocs.io/en/stable/config_file.html#confval-enable_error_code" target="_blank" rel="noopener noreferrer"><code>enable_error_code</code></a> and
<a href="https://mypy.readthedocs.io/en/stable/config_file.html#confval-disable_error_code" target="_blank" rel="noopener noreferrer"><code>disable_error_code</code></a>
in mypy</li>
<li>Notes: setting <code>&lt;error-code&gt; = true</code> is the same as having no error code configuration present, which means
the error will be shown. Setting <code>&lt;error-code&gt; = false</code> will disable the error for type checking.</li>
</ul>
</li>
<li><code>replace_imports_with_any</code>: names of modules from which import errors should be
ignored, and the module should be replaced with <code>typing.Any</code>. For example, with
<code>from x.y import z</code> in a file, adding <code>x</code>, <code>x.*</code> or <code>x.y</code> to this config will
silence those import errors and replace the module with <code>typing.Any</code>. If the module can be found, its type
information will still be replaced with <code>typing.Any</code>.<!-- -->
<ul>
<li>Type: list of regex</li>
<li>Default: <code>[]</code></li>
<li>Flag equivalent: none</li>
<li>ENV equivalent: none</li>
<li>Equivalent configs: <code>ignore_missing_imports</code> in mypy</li>
<li>Notes: <code>reportMissingImports = false</code> has similar behavior in Pyright, but ignores <em>all</em> import errors instead
of import errors from specific modules.</li>
</ul>
</li>
<li><code>ignore_errors_in_generated_code</code>: Whether to ignore type errors in generated code. If enabled, generated files
will be treated as if they are included in <code>project_excludes</code>.
Generated code are determined by checking if the file contents contain the substring <code>{&#x27;@&#x27; + &#x27;generated&#x27;}</code>.<!-- -->
<ul>
<li>Type: bool</li>
<li>Default: false</li>
<li>Flag equivalent: <code>--ignore-errors-in-generated-code</code></li>
<li>ENV equivalent: <code>IGNORE_ERRORS_IN_GENERATED_CODE</code></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="environment-autoconfiguration">Environment Autoconfiguration<a href="#environment-autoconfiguration" class="hash-link" aria-label="Direct link to Environment Autoconfiguration" title="Direct link to Environment Autoconfiguration">​</a></h2>
<p>If any of <code>python_platform</code>, <code>python_version</code>, or <code>site_package_path</code> are empty, we attempt to query an interpreter
for the missing values. By default we query <code>python3</code> if it&#x27;s available on the path, but the interpreter can be
overridden with the <code>python_interpreter</code> config option and flag. If the interpreter does not exist, we fall back to
Pyrefly&#x27;s defaults for all unspecified values.</p>
<p>The values queried from the interpreter are:</p>
<ul>
<li><code>python_platform</code>: <code>sys.platform</code></li>
<li><code>python_version</code>: <code>sys.version_info[:3]</code></li>
<li><code>site_package_path</code>: <code>site.getsitepackages()</code></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/pyrefly/edit/main/website/docs/configuration.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#precedence-in-options" class="table-of-contents__link toc-highlight">Precedence in Options</a></li><li><a href="#configuration-finding" class="table-of-contents__link toc-highlight">Configuration Finding</a></li><li><a href="#configuration-options" class="table-of-contents__link toc-highlight">Configuration Options</a></li><li><a href="#environment-autoconfiguration" class="table-of-contents__link toc-highlight">Environment Autoconfiguration</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/Cf7mFQtW7W" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/pyrefly" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.fb.com/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/meta_open_source_logo.svg" alt="Meta Open Source Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/meta_open_source_logo.svg" alt="Meta Open Source Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2025 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>